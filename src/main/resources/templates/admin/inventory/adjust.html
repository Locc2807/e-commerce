<!DOCTYPE html>
<html lang="vi">
<head th:replace="admin/fragment/head :: head"></head>
<body class="bg-gray-100 font-sans">

	<!-- Topbar -->
	<div th:replace="admin/fragment/header :: header"></div>

	<!-- Layout -->
	<div class="flex pt-14 h-screen">
		<!-- Sidebar -->
		<div th:replace="admin/fragment/aside :: aside"></div>

		<!-- Main Area -->
		<div class="flex flex-col flex-1 overflow-y-auto">
			<main class="flex-1 p-6">
				<h1 class="text-3xl font-bold text-gray-800 mb-6">Điều chỉnh Kho hàng</h1>

				<div class="bg-white p-6 rounded-xl shadow max-w-2xl">
					<!-- Product Info -->
					<div class="mb-6 p-4 bg-gray-50 rounded">
						<h3 class="font-semibold text-lg mb-2" th:text="${product.name}"></h3>
						<div class="flex items-center gap-4">
							<img th:src="@{'/uploads/' + ${product.image}}" alt="product"
								class="h-20 w-20 object-cover rounded">
							<div>
								<p class="text-sm text-gray-600">Số lượng hiện tại: 
									<span class="font-bold text-lg" th:text="${inventory != null ? inventory.quantity : 0}">0</span>
								</p>
								<p class="text-sm text-gray-600">Mức tối thiểu: 
									<span th:text="${inventory != null ? inventory.minStockLevel : 0}">0</span>
								</p>
							</div>
						</div>
					</div>

					<form th:action="@{/admin/inventory/adjust}" method="post">
						<input type="hidden" name="productId" th:value="${product.id}">

						<div class="mb-4">
							<label class="block text-sm font-semibold text-gray-700 mb-2">Loại giao dịch</label>
							<select name="transactionType" class="w-full border px-3 py-2 rounded" required>
								<option value="IMPORT">Nhập kho</option>
								<option value="EXPORT">Xuất kho</option>
								<option value="ADJUSTMENT">Điều chỉnh</option>
							</select>
						</div>

						<div class="mb-4">
							<label class="block text-sm font-semibold text-gray-700 mb-2">Số lượng</label>
							<input type="number" name="quantity" 
								class="w-full border px-3 py-2 rounded" 
								min="1" required>
							<p class="text-xs text-gray-500 mt-1">
								* Nhập kho: Cộng thêm số lượng<br>
								* Xuất kho: Trừ đi số lượng<br>
								* Điều chỉnh: Đặt lại số lượng chính xác
							</p>
						</div>

						<div class="mb-4">
							<label class="block text-sm font-semibold text-gray-700 mb-2">Ghi chú</label>
							<textarea name="note" rows="3" 
								class="w-full border px-3 py-2 rounded"
								placeholder="Nhập ghi chú về giao dịch này..."></textarea>
						</div>

						<div class="flex gap-2">
							<button type="submit" 
								class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
								<i class="fa-solid fa-check"></i> Xác nhận
							</button>
							<a th:href="@{/admin/inventory}" 
								class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">
								<i class="fa-solid fa-times"></i> Hủy
							</a>
						</div>
					</form>
				</div>
			</main>

			<!-- Footer -->
			<div th:replace="admin/fragment/footer :: footer"></div>
		</div>
	</div>

	<div th:replace="admin/fragment/script :: script"></div>

</body>
</html>
